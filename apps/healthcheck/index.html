<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kube-Snake Health</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <h1>üêç Kube-Snake</h1>
        <p>Page health status: <span class="status">HEALTHY</span></p>

        <div class="tech-overview">
            <h3>Infrastructure & Deployment</h3>
            <p>
                <strong>Cluster:</strong> K3s on Hetzner Cloud (Ubuntu 22.04, 2 vCPU, 4GB RAM)<br>
                <strong>GitOps:</strong> ArgoCD (30-min polling) ‚Üí Helm charts ‚Üí Rolling deployments<br>
                <strong>CI/CD:</strong> GitHub Actions ‚Üí Docker build ‚Üí GHCR ‚Üí Auto-update values.yaml ‚Üí ArgoCD sync
            </p>

            <h3>Application Stack</h3>
            <p>
                <strong>Backend:</strong> .NET 9 Minimal API (2 replicas, horizontal scaling)<br>
                <strong>Frontend:</strong> HTMX (hypermedia-driven, zero JavaScript framework)<br>
                <strong>Database:</strong> MongoDB StatefulSet (5Gi PVC, persistent storage)<br>
                <strong>Session Store:</strong> Redis (Bitnami Helm chart, distributed cache)<br>
                <strong>Reverse Proxy:</strong> Caddy (automatic TLS via Let's Encrypt)
            </p>

            <h3>Security</h3>
            <p>
                <strong>Secrets:</strong> Bitnami Sealed Secrets (asymmetric encryption, Git-safe)<br>
                <strong>Network:</strong> ClusterIP service isolation, path-based Ingress routing<br>
                <strong>Authentication:</strong> Cookie-based sessions (HttpOnly, Secure, SameSite=None)<br>
                <strong>Storage:</strong> DataProtection keys on PVC (consistent encryption across replicas)
            </p>
        </div>

        <!-- Guestbook Section -->
        <hr>
        <h2>üìù Guestbook</h2>
        <div id="guestbook-container">
            <div id="messages-list" hx-get="/guestbook/api/messages" hx-trigger="load, every 30s" hx-swap="innerHTML">
                <p>Loading messages...</p>
            </div>

            <div id="admin-section">
                <h3>Admin</h3>
                <form hx-post="/guestbook/api/login" hx-target="#admin-section" hx-swap="outerHTML">
                    <input type="text" name="username" placeholder="Username" required>
                    <input type="password" name="password" placeholder="Password" required>
                    <button type="submit">Login</button>
                </form>
            </div>
        </div>
    </div>

    <!-- HTMX is FANTASTIC -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
</body>

</html>